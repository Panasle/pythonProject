"""

题目：用牛顿法迭代计算y=sqrt()

"""


def sqrt(y_label):  # y_label为需要开方的标签
    x = 1  # 要求解的值为x，现在初始化。x为要更新的参数！
    y = lambda x: x ** 2  # 计算得到的预测值y,原函数
    y_dao = lambda x: 2 * x  # 求y对x的导数
    y_delta = lambda y_label, x: y_label - y(x)  # 出真实标签值与预测值y之间的差值
    x_delta = lambda y_label, x: y_delta(y_label, x) / y_dao(x)  # 求出更新项，也就是x的差值,公式：y_dao=y_delta/x_delta

    for _ in range(10):
        print("x=%s,loss=%s" % (x, x_delta(y_label, x)))
        x += x_delta(y_label, x)  #
    return x


if __name__ == '__main__':
    for x in range(10):
        print('sqrt(%s)=%s' % (x, sqrt(x)))

'''
x=1,loss=-0.5
x=0.5,loss=-0.25
x=0.25,loss=-0.125
x=0.125,loss=-0.0625
x=0.0625,loss=-0.03125
x=0.03125,loss=-0.015625
x=0.015625,loss=-0.0078125
x=0.0078125,loss=-0.00390625
x=0.00390625,loss=-0.001953125
x=0.001953125,loss=-0.0009765625
sqrt(0)=0.0009765625
x=1,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
x=1.0,loss=0.0
sqrt(1)=1.0
x=1,loss=0.5
x=1.5,loss=-0.08333333333333333
x=1.4166666666666667,loss=-0.002450980392156932
x=1.4142156862745099,loss=-2.123899819940621e-06
x=1.4142135623746899,loss=-1.5947429102833119e-12
x=1.4142135623730951,loss=-1.570092458683775e-16
x=1.414213562373095,loss=1.5700924586837752e-16
x=1.4142135623730951,loss=-1.570092458683775e-16
x=1.414213562373095,loss=1.5700924586837752e-16
x=1.4142135623730951,loss=-1.570092458683775e-16
sqrt(2)=1.414213562373095
x=1,loss=1.0
x=2.0,loss=-0.25
x=1.75,loss=-0.017857142857142856
x=1.7321428571428572,loss=-9.204712812970961e-05
x=1.7320508100147276,loss=-2.445850337895745e-09
x=1.7320508075688772,loss=1.2819751242557095e-16
x=1.7320508075688774,loss=-1.2819751242557092e-16
x=1.7320508075688772,loss=1.2819751242557095e-16
x=1.7320508075688774,loss=-1.2819751242557092e-16
x=1.7320508075688772,loss=1.2819751242557095e-16
sqrt(3)=1.7320508075688774
x=1,loss=1.5
x=2.5,loss=-0.45
x=2.05,loss=-0.04939024390243895
x=2.000609756097561,loss=-0.0006096631752661074
x=2.0000000929222947,loss=-9.292229265083572e-08
x=2.000000000000002,loss=-2.2204460492503107e-15
x=2.0,loss=0.0
x=2.0,loss=0.0
x=2.0,loss=0.0
x=2.0,loss=0.0
sqrt(4)=2.0
x=1,loss=2.0
x=3.0,loss=-0.6666666666666666
x=2.3333333333333335,loss=-0.09523809523809547
x=2.238095238095238,loss=-0.0020263424518745013
x=2.2360688956433634,loss=-9.18143385206549e-07
x=2.236067977499978,loss=-1.8847399291451707e-13
x=2.23606797749979,loss=-1.9860273225978183e-16
x=2.23606797749979,loss=-1.9860273225978183e-16
x=2.23606797749979,loss=-1.9860273225978183e-16
x=2.23606797749979,loss=-1.9860273225978183e-16
sqrt(5)=2.23606797749979
x=1,loss=2.5
x=3.5,loss=-0.8928571428571429
x=2.607142857142857,loss=-0.15288649706457924
x=2.454256360078278,loss=-0.0047619884713128
x=2.4494943716069653,loss=-4.628819413583487e-06
x=2.4494897427875517,loss=-4.373648891556957e-12
x=2.449489742783178,loss=1.812986607347358e-16
x=2.449489742783178,loss=1.812986607347358e-16
x=2.449489742783178,loss=1.812986607347358e-16
x=2.449489742783178,loss=1.812986607347358e-16
sqrt(6)=2.449489742783178
x=1,loss=3.0
x=4.0,loss=-1.125
x=2.875,loss=-0.22010869565217392
x=2.654891304347826,loss=-0.009124260157536536
x=2.6457670441902894,loss=-1.5733078920094648e-05
x=2.6457513111113693,loss=-4.677877233970447e-11
x=2.6457513110645907,loss=-1.6784994417006302e-16
x=2.6457513110645907,loss=-1.6784994417006302e-16
x=2.6457513110645907,loss=-1.6784994417006302e-16
x=2.6457513110645907,loss=-1.6784994417006302e-16
sqrt(7)=2.6457513110645907
x=1,loss=3.5
x=4.5,loss=-1.3611111111111112
x=3.138888888888889,loss=-0.29510816125860373
x=2.843780727630285,loss=-0.015312155750138466
x=2.8284685718801468,loss=-4.144683028262594e-05
x=2.8284271250498643,loss=-3.0367409454935887e-10
x=2.8284271247461903,loss=-3.14018491736755e-16
x=2.82842712474619,loss=3.1401849173675503e-16
x=2.8284271247461903,loss=-3.14018491736755e-16
x=2.82842712474619,loss=3.1401849173675503e-16
sqrt(8)=2.8284271247461903
x=1,loss=4.0
x=5.0,loss=-1.6
x=3.4,loss=-0.37647058823529395
x=3.023529411764706,loss=-0.02343785763332571
x=3.00009155413138,loss=-9.155273439631498e-05
x=3.000000001396984,loss=-1.3969838612726965e-09
x=3.0,loss=0.0
x=3.0,loss=0.0
x=3.0,loss=0.0
x=3.0,loss=0.0
sqrt(9)=3.0
'''
